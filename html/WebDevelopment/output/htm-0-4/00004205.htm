<html><h1 class="refsect1">HIER_ANCESTOR</h1>
<p><code>HIER_ANCESTOR</code> returns the ancestor at a particular level of a hierarchy for either all members in the hierarchy or a particular member. The hierarchy must be level-based.</p>
<p class="titleinrefsubsect"><a id="sthref112" name="sthref112"></a>Return Value</p>
<pre xml:space="preserve" class="oac_no_warn">VARCHAR2
</pre>
<p class="titleinrefsubsect"><a id="sthref113" name="sthref113"></a>Syntax</p>
<pre xml:space="preserve" class="oac_no_warn"><span class="bold">HIER_ANCESTOR(</span> 
  [member_expression] [<span class="bold">WITHIN</span>]
  {<span class="bold">DIMENSION</span> dimension_id | <span class="bold">HIERARCHY</span> hierarchy_id}
  {<span class="bold">DIMENSION LEVEL</span> dim_level_id | <span class="bold">HIERARCHY LEVEL</span> hier_level_id} <span class="bold">)</span> 
</pre>
<p class="titleinrefsubsect"><a id="sthref114" name="sthref114"></a>Arguments</p>
<p class="subhead2"><a id="OLAXS219" name="OLAXS219"></a><a id="sthref115" name="sthref115"></a><span class="italic">member_expression</span></p>
<p>Identifies a dimension member within the hierarchy whose ancestor is returned. If this optional argument is specified, then the result does not vary across dimension members.</p>
<p class="subhead2"><a id="OLAXS220" name="OLAXS220"></a><a id="sthref116" name="sthref116"></a><span class="italic">dimension_id</span></p>
<p>The dimension over which the values are calculated using the default hierarchy.</p>
<p class="subhead2"><a id="OLAXS221" name="OLAXS221"></a><a id="sthref117" name="sthref117"></a><span class="italic">hierarchy_id</span></p>
<p>The hierarchy over which the values are calculated. If <code><span class="codeinlineitalic">dimension_id</span></code> is used instead, the default hierarchy is used.</p>
<p class="subhead2"><a id="OLAXS222" name="OLAXS222"></a><a id="sthref118" name="sthref118"></a><span class="italic">dim_level_id</span></p>
<p>The level of the ancestor in <code><span class="codeinlineitalic">dimension_id</span></code>.</p>
<p class="subhead2"><a id="OLAXS223" name="OLAXS223"></a><a id="sthref119" name="sthref119"></a><span class="italic">hier_level_id</span></p>
<p>The level of the ancestor in <code><span class="codeinlineitalic">hierarchy_id</span></code>.</p>
<p class="titleinrefsubsect"><a id="sthref120" name="sthref120"></a>Example</p>
<p>This example returns the ancestor at the Calendar Quarter level for members of the default Calendar hierarchy of the Time dimension.</p>
<p><code>HIER_ANCESTOR(DIMENSION "TIME" DIMENSION LEVEL TIME.CALENDAR_QUARTER)</code></p>
<div class="inftblinformal">
<table class="Informal" title="HIER_ANCESTOR Example 1" summary="Output from HIER_ANCESTOR example 1" dir="ltr" border="1" width="100%" frame="hsides" rules="groups" cellpadding="3" cellspacing="0">
<col width="*" />
<col width="50%" />
<thead>
<tr align="left" valign="top">
<th align="left" valign="bottom" id="r1c1-t8">Time</th>
<th align="left" valign="bottom" id="r1c2-t8">Ancestor</th>
</tr>
</thead>
<tbody>
<tr align="left" valign="top">
<td align="left" id="r2c1-t8" headers="r1c1-t8">2006</td>
<td align="left" headers="r2c1-t8 r1c2-t8">--</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r3c1-t8" headers="r1c1-t8">Q1.06</td>
<td align="left" headers="r3c1-t8 r1c2-t8">CY2006.Q1</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r4c1-t8" headers="r1c1-t8">Q2.06</td>
<td align="left" headers="r4c1-t8 r1c2-t8">CY2006.Q2</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r5c1-t8" headers="r1c1-t8">Q3.06</td>
<td align="left" headers="r5c1-t8 r1c2-t8">CY2006.Q3</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r6c1-t8" headers="r1c1-t8">Q4.06</td>
<td align="left" headers="r6c1-t8 r1c2-t8">CY2006.Q4</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r7c1-t8" headers="r1c1-t8">JAN-06</td>
<td align="left" headers="r7c1-t8 r1c2-t8">CY2006.Q1</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r8c1-t8" headers="r1c1-t8">FEB-06</td>
<td align="left" headers="r8c1-t8 r1c2-t8">CY2006.Q1</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r9c1-t8" headers="r1c1-t8">MAR-06</td>
<td align="left" headers="r9c1-t8 r1c2-t8">CY2006.Q1</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r10c1-t8" headers="r1c1-t8">APR-06</td>
<td align="left" headers="r10c1-t8 r1c2-t8">CY2006.Q2</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r11c1-t8" headers="r1c1-t8">MAY-06</td>
<td align="left" headers="r11c1-t8 r1c2-t8">CY2006.Q2</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r12c1-t8" headers="r1c1-t8">JUN-06</td>
<td align="left" headers="r12c1-t8 r1c2-t8">CY2006.Q2</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r13c1-t8" headers="r1c1-t8">JUL-06</td>
<td align="left" headers="r13c1-t8 r1c2-t8">CY2006.Q3</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r14c1-t8" headers="r1c1-t8">AUG-06</td>
<td align="left" headers="r14c1-t8 r1c2-t8">CY2006.Q3</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r15c1-t8" headers="r1c1-t8">SEP-06</td>
<td align="left" headers="r15c1-t8 r1c2-t8">CY2006.Q3</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r16c1-t8" headers="r1c1-t8">OCT-06</td>
<td align="left" headers="r16c1-t8 r1c2-t8">CY2006.Q4</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r17c1-t8" headers="r1c1-t8">NOV-06</td>
<td align="left" headers="r17c1-t8 r1c2-t8">CY2006.Q4</td>
</tr>
<tr align="left" valign="top">
<td align="left" id="r18c1-t8" headers="r1c1-t8">DEC-06</td>
<td align="left" headers="r18c1-t8 r1c2-t8">CY2006.Q4</td>
</tr>
</tbody>
</table>
<br /></div>
<!-- class="inftblinformal" -->
<p>The next example returns <code>GOV</code> as the ancestor of the US Department of Labor at the Customer Market Segment level in the Market hierarchy of the Customer dimension.</p>
<p><code>HIER_ANCESTOR('US DPT LBR' WITHIN HIERARCHY CUSTOMER.MARKET DIMENSION LEVEL CUSTOMER.MARKET_SEGMENT)</code></p>
</div>
</html>